\documentclass[11pt,english,letterpaper,oneside]{article}
\usepackage{amsmath,amssymb,amsfonts,amsthm,enumerate,enumitem}
\usepackage{mathpazo}
\usepackage[margin=2.5cm]{geometry}
\usepackage{graphicx,microtype}
\usepackage{textcomp}
\usepackage[T1]{fontenc}
\DisableLigatures[f]{encoding=T1}
\usepackage[skip=2pt]{caption}
\usepackage{hyperref}
\usepackage{setspace,array,float}
\usepackage{bm,upgreek}
\usepackage[compact]{titlesec}
\usepackage[none]{hyphenat}
\setlength{\parskip}{0.25cm}
\setlength{\parindent}{0cm}
\usepackage{natbib}
\setcitestyle{citesep={;},aysep={}}
\usepackage{babel}
\usepackage{datetime}
\frenchspacing
\usepackage[table]{xcolor}
\usepackage{framed}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

\makeatletter
\g@addto@macro\normalsize{%
  \setlength\belowdisplayskip{15pt}
  \setlength\belowdisplayshortskip{10pt}
}
\makeatother

\renewcommand{\familydefault}{ppl}

\newcommand{\ppgtk}{PPGtk}
\newcommand{\code}[1]{\hspace{5pt} \texttt{\$ #1}}
\newcommand{\rcode}[1]{\hspace{5pt} \texttt{[R]> #1}}
\newcommand{\makefile}[1]{\hspace{5pt} \texttt{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\pagestyle{empty}

\vspace*{1.5in}
\begin{center}

	{\huge \ppgtk: the polyploid pop-gen toolkit}
	\vspace{0.5in}

	Written and maintained by Paul Blischak

	E-mail: \href{mailto:blischak.4@osu.edu}{blischak.4@osu.edu}

	Source code: \url{https://github.com/pblischak/ppgtk}

	Online docs: \url{http://pblischak.github.io/ppgtk}

\end{center}

\vspace{4in}

{\small \textit{\copyright{} 2016 by Paul Blischak. This software is provided ``as is'' without warranty of any kind. In no event shall the author be held responsible for any damage resulting from the use of this software. The program package, including source codes, executables, and documentation, is distributed free of charge. This software is covered under version 3 of the GNU GPL (General Public License).}}

\newpage

\tableofcontents

\newpage

\clearpage
\pagestyle{plain}
\setcounter{page}{1}

\ppgtk{} is a set of tools written in C++ for population genetic/genomic analyses with polyploids using high-throughput sequencing data. It was designed for research in non-model taxa (i.e., no reference genome), and provides a number of functions for conducting population genomics analyses in these taxa.

\section{Installing from source}

Installing \ppgtk{} follows the typical workflow for Unix-based operating systems using a Makefile and the commands \texttt{`make \&\& sudo make install'}.

\subsection{Obtaining \ppgtk}

A ``bleeding edge'' version of the source code for \ppgtk{} can be cloned from GitHub using:

\code{git clone https://github.com/pblischak/ppgtk.git}

from the command line. You can also download the latest stable release from GitHub by following the \textbf{releases} link in the \ppgtk{} repository.

\code{cd ppgtk-v1.0.0}

\rcode{dat <- read.table("tot-reads.txt")}

\subsection{Boost C++ Libraries}

%\citep{boostCPP}

\subsection{OpenMP}

%\citep{openMP}
can be used for parallelization.

\subsection{Compiling the executable}

To enable parallelization with OpenMP, you will need to change the \texttt{OPENMP} variable in the Makefile to \texttt{yes}, like so:

\makefile{OPENMP ?= yes}

If you installed Boost in \texttt{/usr/local/bin}, then the paths to the header files and libraries should already be correctly specified in the Makefile. If you installed it somewhere else, then you will need to change the \texttt{BOOST\_LIB} and \texttt{BOOST\_INC} variables to point to where it was installed.

If you are on a Mac, type:

\code{make darwin}

If you are on a Linux computer, type:

\code{make linux}

\section{PPGtk Docker image}

If you would like to run PPGtk, but don't want to go through the processing of compiling it from source, we have built a Docker image of a Ubuntu-based environment with the PPGtk program already installed. If you are unfaniliar with Docker, please read over some of the introductory documentation on their website. We will cover the basic steps that will be necessary to use PPGtk in this way.

\subsection{Downloading Docker}

\subsection{Obtaining the PPGtk image}

Launch the Docker Quickstart Terminal and type the following command:

\code{docker pull pblischak/ppgtk}

To run an instance of the image as a container, type:

\code{docker run -it pblischak/ppgtk}

Now that you are operating within the container, you can check to see if PPGtk is working by typing:

\code{ppgtk -v}

This should result in the following output (the version number may be different):

\begin{framed}

\begin{verbatim}
   ____  ____   ____ _   _    
  |  _ \|  _ \ / ___| |_| | __
  | |_) | |_) | |  _| __| |/ / 
  |  __/|  __/| |_| | |_|   <  
  |_|   |_|    \____|\__|_|\_\

********************************************************************************
**  This is PPGtk version 0.1.0 (May 2016)
**  For help using the sofware type: ppgtk -h or ppgtk --model <model-name> -h
**  Documentation can be also found online at http://pblischak.github.io/ppgtk/
********************************************************************************
\end{verbatim}

\end{framed}

\subsection{Making your data accessible within a container}

\code{docker run -it -v /Users/path/to/data:/home/analysis pblischak/ppgtk}

This step will launch a Bash shell within a Docker container running a basic Ubuntu operating system. You will enter the container in a folder named \texttt{/home/analysis}, which is also the folder that you attached your data to. If you type \texttt{ls}, you should see the data files that you had on you own machine. With the docker container running, you can analyze the data that you attached just like you would run it from any other terminal window.

\code{ppgtk -{}-model freqs -c config.txt -q}

\subsection{Creating a multicore Docker Machine}

\code{docker-machine create -{}-driver virtualbox -{}-virtualbox-cpu-count <\#cpus> <name>}

\code{docker-machine create -{}-driver virtualbox -{}-virtualbox-cpu-count 4 multicore}

\code{docker-machine env multicore}

Whenever you start a Docker Quickstart Terminal, you will be using the default machine. To switch to the new \texttt{multicore} machine run the following

\code{eval \$(docker-machine env multicore)}

\section{Getting Started}

\code{ppgtk -n 100 -l 2000 -p 4 -t total.txt -r reference.txt -q}

\texttt{total.txt}:

\begin{verbatim}
24	39	12	0	63	0	33	45	. . .
20	33	21	0	0	78	27	11	. . .
.
.
.
7	4	80	22	26	22	18	4	. . .
\end{verbatim}

\newpage

%\bibliographystyle{plain}
%\bibliography{ppgtk}



\end{document}
