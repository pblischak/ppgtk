\documentclass[11pt,english,letterpaper,oneside]{article}
\usepackage{amsmath,amssymb,amsfonts,amsthm,enumerate,enumitem}
\usepackage{mathpazo}
\usepackage[margin=2.5cm]{geometry}
\usepackage{graphicx,microtype}
\usepackage{textcomp}
\usepackage[T1]{fontenc}
\DisableLigatures[f]{encoding=T1}
\usepackage[skip=2pt]{caption}
\usepackage[colorlinks]{hyperref}
\usepackage{setspace,array,float}
\usepackage{bm,upgreek}
\usepackage[compact]{titlesec}
\usepackage[none]{hyphenat}
\setlength{\parskip}{0.25cm}
\setlength{\parindent}{0cm}
\usepackage{natbib}
\setcitestyle{citesep={;},aysep={}}
\usepackage{babel}
\usepackage{datetime}
\frenchspacing
\usepackage[dvipsnames,table]{xcolor}
\usepackage{framed}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

\makeatletter
\g@addto@macro\normalsize{%
  \setlength\belowdisplayskip{15pt}
  \setlength\belowdisplayshortskip{10pt}
}
\makeatother

\renewcommand{\familydefault}{ppl}

\newcommand{\code}[1]{\hspace{5pt} \texttt{\$ #1}}
\newcommand{\rcode}[1]{\hspace{5pt} \texttt{[R]> #1}}
\newcommand{\makefile}[1]{\hspace{5pt} \texttt{#1}}

\hypersetup{linkcolor=Blue,
		      urlcolor=BrickRed,
		      breaklinks=true
		      }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\pagestyle{empty}

\vspace*{1.5in}
\begin{center}

	{\huge PPGtk: the polyploid pop-gen toolkit}
	\vspace{0.5in}

	Written and maintained by Paul Blischak

	E-mail: {\href{mailto:blischak.4@osu.edu}{blischak.4@osu.edu}}

	Source code: {\url{https://github.com/pblischak/ppgtk}}
	
	Docker image: {\url{https://hub.docker.com/r/pblischak/ppgtk}}

	Online docs: {\url{http://pblischak.github.io/ppgtk}}

\end{center}

\vspace{4in}

{\small \textit{\copyright{} 2016 by Paul Blischak. This software is provided ``as is'' without warranty of any kind. In no event shall the author be held responsible for any damage resulting from the use of this software. The program package, including source codes, executables, and documentation, is distributed free of charge. This software is covered under version 3 of the GNU GPL (General Public License).}}

\newpage

{ \tableofcontents }

\newpage

\clearpage
\pagestyle{plain}
\setcounter{page}{1}

PPGtk is a set of tools written in C++ for population genetic/genomic analyses of high-throughput sequencing (HTS) data collected in polyploid organisms. It was designed for research in non-model polyploids (i.e., no reference genome), and aims to provide models that facilitate the discovery of patterns of genetic diversity. 



\section{Installing from source}

Installing PPGtk from source requires the Boost C++ Libraries. PPGtk also has multithreading capabilities through the OpenMP libraries, which will require an OpenMP compatible C++ compiler (such as the GNU g++ compiler). As a special note for Mac OSX users, the ``g++ compiler'' that comes with a Mac is not actually the GNU g++ compiler. Typing \texttt{g++ -v} in a terminal window should confirm this. The native Apple/Mac compilers do not support OpenMP threading, so you will need to get the GNU versions. This link ({\url{http://hpc.sourceforge.net/}}) has instructions for downloading and installing gcc on a Mac. Alternatively, you could use Homebrew ({\url{http://brew.sh/}}).

\hspace{15pt} If you would like to use PPGtk but don't want to compile it from source, we have built a Docker image with the software and dependencies already installed. Information for using PPGtk with Docker can be found in the the next section: \hyperref[ppgtk-docker]{PPGtk Docker image}.

\subsection{Boost C++ Libraries}

%\citep{boostCPP}

\code{cd boost\_1\_60\_0}

\code{./bootstrap.sh -{}-help}

\code{./bootstrap.sh -{}-prefix=/usr/local -{}-with-libraries=program\_options}

\code{sudo ./b2 install}

\subsection{OpenMP}

%\citep{openMP}
can be used for parallelization.

\code{export OMP\_NUM\_THREADS=4}

\subsection{Obtaining PPGtk}

A ``bleeding edge'' version of the source code for PPGtk can be cloned from GitHub using:

\code{git clone https://github.com/pblischak/ppgtk.git}

from the command line. You can also download the latest stable release from GitHub by following the \textbf{releases} link in the PPGtk repository.

\code{cd ppgtk-v1.0.0}

\rcode{dat <- read.table("tot-reads.txt")}

\subsection{Compiling the executable}

To enable parallelization with OpenMP, you will need to change the \texttt{OPENMP} variable in the Makefile to \texttt{yes}, like so:

\makefile{OPENMP ?= yes}

If you installed Boost in \texttt{/usr/local/bin}, then the paths to the header files and libraries should already be correctly specified in the Makefile. If you installed it somewhere else, then you will need to change the \texttt{BOOST\_LIB} and \texttt{BOOST\_INC} variables to point to where it was installed.

Then type \texttt{make} to compile the executable. After successfully compiling the program, typing \texttt{sudo make install} will install the \texttt{ppgtk} executable to be used from anywhere on your computer by copying it into \texttt{/usr/local/bin} (this is why you need to use \texttt{sudo}).

\section{PPGtk Docker image}\label{ppgtk-docker}

If you would like to run PPGtk, but don't want to go through the processing of compiling it from source, we have built a Docker image of a Ubuntu-based environment with the PPGtk program already installed. If you are unfaniliar with Docker, please read over some of the introductory documentation on their website. We will cover the basic steps that will be necessary to use PPGtk in this way.

\subsection{Downloading Docker}

\subsection{Obtaining the PPGtk image}

Launch the Docker Quickstart Terminal and type the following command:

\code{docker pull pblischak/ppgtk}

To run an instance of the image as a container, type:

\code{docker run -it pblischak/ppgtk}

Now that you are operating within the container, you can check to see if PPGtk is working by typing:

\code{ppgtk -v}

This should result in the following output (the version number may be different):

\begin{framed}

\begin{verbatim}
   ____  ____   ____ _   _    
  |  _ \|  _ \ / ___| |_| | __
  | |_) | |_) | |  _| __| |/ / 
  |  __/|  __/| |_| | |_|   <  
  |_|   |_|    \____|\__|_|\_\

********************************************************************************
**  This is PPGtk version 0.1.0 (May 2016)
**  For help using the sofware type: ppgtk -h or ppgtk --model <model-name> -h
**  Documentation can be also found online at http://pblischak.github.io/ppgtk/
********************************************************************************
\end{verbatim}

\end{framed}

\subsection{Making your data accessible within a container}

\code{docker run -it -v /Users/path/to/data:/home/analysis pblischak/ppgtk}

This step will launch a Bash shell within a Docker container running a basic Ubuntu operating system. You will enter the container in a folder named \texttt{/home/analysis}, which is also the folder that you attached your data to. If you type \texttt{ls}, you should see the data files that you had on you own machine. With the docker container running, you can analyze the data that you attached just like you would run it from any other terminal window.

\code{ppgtk -{}-model freqs -c config.txt -q}

\subsection{Creating a multicore Docker Machine}

\code{docker-machine create -{}-driver virtualbox -{}-virtualbox-cpu-count <\#cpus> <name>}

\code{docker-machine create -{}-driver virtualbox -{}-virtualbox-cpu-count 4 multicore}

\code{docker-machine env multicore}

Whenever you start a Docker Quickstart Terminal, you will be using the default machine. To switch to the new \texttt{multicore} machine run the following:

\code{eval \$(docker-machine env multicore)}

\section{Getting Started}

For a general help message:

\code{ppgtk -h}

For a help message specific to a particular model:

\code{ppgtk -{}-model <model-name> -h}

To specify and run an analysis, supply the \texttt{model} and \texttt{config} arguments:

\code{ppgtk -{}-model freqs -{}-config freqs.txt}

The full \texttt{model} and \texttt{config} argument flags can also be shortened to just the first letter:

\code{ppgtk -m freqs -c freqs.txt}

\texttt{total.txt}:

\begin{verbatim}
24	39	12	0	63	0	33	45	. . .
20	33	21	0	0	78	27	11	. . .
.
.
.
7	4	80	22	26	22	18	4	. . .
\end{verbatim}

\newpage

%\bibliographystyle{plain}
%\bibliography{ppgtk}



\end{document}
